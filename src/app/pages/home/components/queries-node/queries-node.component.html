<div class="query-container bg-white">
  <div class="container">
    <div class="row">
      <div class="col">
        <h4>{{query.name}}</h4>
        <p class="font-weight-bold" [ngClass]="stateColor">{{stateText}}</p>
        <p class="view-notes-link m-0" (click)="openNotes()" *ngIf="!showNotes">View Notes</p>
        <p class="view-notes-link m-0" (click)="openNotes()" *ngIf="showNotes">Hide Notes</p>
      </div>
      <div class="col-md-auto">
        <table class="table table-borderless table-responsive">
          <tbody>
            <tr>
              <td>Dataset</td>
              <td>{{query.dataset}}</td>
              <td>Clip duration</td>
              <td>{{query.clip_duration}} seconds</td>
            </tr>
            <tr>
              <td>Reference Video</td>
              <td>{{query.video_name}}</td>
              <td>Target bootstrapping</td>
              <td>{{query.use_dynamic_target_adjustment}}</td>
            </tr>
            <tr>
              <td>Reference time</td>
              <td>{{query.reference_time}}</td>
              <td>Matches to review</td>
              <td>{{query.max_matches_for_review}}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="col-md-auto">
        <ng-container [ngSwitch]="stateButton">
          <ng-container *ngSwitchCase="1">
            <button class="btn" [ngClass]="buttonColor">{{buttonText}}</button>
          </ng-container>
          <ng-container *ngSwitchCase="2">
            <button class="btn" [ngClass]="buttonColor" routerLink="/query/{{query.id}}">{{buttonText}}</button>
          </ng-container>
          <ng-container *ngSwitchCase="3">
            <a class="btn" [ngClass]="buttonColor" [href]="query.final_report_file">{{buttonText}}</a>
          </ng-container>
        </ng-container>
      </div>
    </div>
    <div class="row mt-2" *ngIf="showNotes">
      <div class="col">
        <div class="notes">
          <textarea class="form-control"  name="notes">{{query.notes}}</textarea>
        </div>
      </div>
    </div>
  </div>
</div>
